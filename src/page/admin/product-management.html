<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Qu·∫£n Tr·ªã - SkyDrone</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../../stylesheets/admin/QuanLySanPham.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="main-header">
    <div class="logo">
        <img src="/image/logoo2.png" alt="Logo">
        <h2>SkyDrone Admin</h2>
    </div>
    <div class="header-right">
        <button class="logout-btn" id="logoutBtn"  title="ƒêƒÉng xu·∫•t">
            <i class="bi bi-box-arrow-right"></i>
        </button>
    </div>
    <div class="logout-modal" id="logoutModal">
        <div class="logout-modal-content">
            <p>B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?</p>
            <div class="logout-actions">
                <a href="../login.html"><button id="confirmLogout" class="confirm">C√≥</button></a>
                <button id="cancelLogout" class="cancel">Kh√¥ng</button>
            </div>
        </div>
    </div>
</header>

<!-- ===== LAYOUT ===== -->
<div class="layout">
    <!-- === SIDEBAR === -->
    <aside class="sidebar">
        <div class="user-info">
            <img src="https://i.pravatar.cc/80" alt="Avatar">
            <h3>M·∫°c Nguy√™n</h3>
            <p>Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i üëã</p>
        </div>

        <ul class="menu">
            <a href="dashboard.html"><li><i class="bi bi-speedometer2"></i> T·ªïng Quan</li></a>
            <a href="QuanLyKhachHang.html"><li><i class="bi bi-person-lines-fill"></i> Qu·∫£n L√Ω T√†i Kho·∫£n</li></a>
            <a href="product-management.html"><li class="active"><i class="bi bi-box-seam"></i> Qu·∫£n L√Ω S·∫£n Ph·∫©m</li></a>
            <a href="QuanLyDanhMuc.html"><li><i class="bi bi-tags"></i> Qu·∫£n L√Ω Danh M·ª•c</li></a>

            <li class="has-submenu">
                <div class="menu-item">
                    <i class="bi bi-truck"></i>
                    <span>Qu·∫£n L√Ω ƒê∆°n H√†ng</span>
                    <i class="bi bi-chevron-right arrow"></i>
                </div>
                <ul class="submenu">
                    <a href="QuanLyDonHangChuaXacNhan.html"><li>Ch∆∞a X√°c Nh·∫≠n</li></a>
                    <a href="QuanLyDonHangDaXacNhan.html"><li>ƒê√£ X√°c Nh·∫≠n</li></a>
                </ul>
            </li>

            <a href="QuanLyBlog.html"><li><i class="bi bi-journal-text"></i> Qu·∫£n L√Ω Blog</li></a>
            <a href="QuanLyKhuyenMai.html"><li><i class="bi bi-megaphone"></i> Qu·∫£n L√Ω Khuy·∫øn M√£i</li></a>
            <a href="thongKe.html"><li><i class="bi bi-bar-chart"></i> B√°o C√°o & Th·ªëng K√™</li></a>
        </ul>
    </aside>

    <!-- === MAIN CONTENT === -->
    <main class="main-content container-fluid p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">

            <h4 class="text-primary fw-bold"><i class="bi bi-box-seam"></i> Qu·∫£n L√Ω S·∫£n Ph·∫©m</h4>

            <div class="d-flex align-items-center gap-2">

                <!-- üîç THANH T√åM KI·∫æM -->
                <form class="d-flex" role="search" style="max-width: 300px;">
                    <div class="input-group">
                <span class="input-group-text bg-primary text-white">
                    <i class="bi bi-search"></i>
                </span>
                        <input id="searchInput" type="search" class="form-control"
                               placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." aria-label="T√¨m ki·∫øm">
                    </div>
                </form>

                <!-- ‚ûï N√öT TH√äM S·∫¢N PH·∫®M -->
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalSanPham">
                    <i class="bi bi-plus-lg"></i> Th√™m S·∫£n Ph·∫©m
                </button>

            </div>
        </div>




        <!-- === B·∫¢NG S·∫¢N PH·∫®M === -->
        <table id="tableSanPham" class="table table-striped table-bordered">
            <thead class="table-primary">
            <tr>
                <th>M√£ SP</th>
                <th>T√™n SP</th>
                <th>Danh M·ª•c</th>
                <th>·∫¢nh</th>
                <th>Gi√° G·ªëc</th>
                <th>Gi√° KM</th>
                <th>Tr·∫°ng Th√°i</th>
                <th>Thao T√°c</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>SP001</td>
                <td>FlyCam SkyMini</td>
                <td>Drone Mini</td>
                <td><img src="https://via.placeholder.com/60" class="img-thumbnail"></td>
                <td>2.000.000ƒë</td>
                <td>1.800.000ƒë</td>
                <td><span class="badge bg-success">ƒêang KD</span></td>
                <td>
                    <button class="btn btn-warning btn-sm"><i class="bi bi-pencil"></i></button>
                    <button class="btn btn-danger btn-sm"><i class="bi bi-trash"></i></button>
                    <button class="btn btn-secondary btn-sm"><i class="bi bi-eye-slash"></i></button>
                </td>
            </tr>
            </tbody>
        </table>
    </main>
</div>

<!-- === MODAL TH√äM / S·ª¨A S·∫¢N PH·∫®M === -->

<div class="modal fade" id="modalSanPham" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="bi bi-pencil-square"></i> C·∫≠p Nh·∫≠t Th√¥ng Tin S·∫£n Ph·∫©m</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <form id="formSanPham" class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">M√£ s·∫£n ph·∫©m</label>
                        <input type="text" class="form-control" id="maSP" placeholder="Nh·∫≠p m√£ s·∫£n ph·∫©m">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">T√™n s·∫£n ph·∫©m</label>
                        <input type="text" class="form-control" id="tenSP" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Danh m·ª•c</label>
                        <select class="form-select" id="danhMuc">
                            <option>Drone Mini</option>
                            <option>Drone Cao C·∫•p</option>
                            <option>Drone G·∫Øn Camera</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Tr·∫°ng th√°i</label>
                        <select class="form-select" id="trangThai">
                            <option>ƒêang Kinh Doanh</option>
                            <option>·∫®n</option>
                            <option>H·∫øt H√†ng</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Gi√° g·ªëc</label>
                        <input type="number" class="form-control" id="giaGoc" placeholder="Nh·∫≠p gi√° g·ªëc">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Gi√° khuy·∫øn m√£i</label>
                        <input type="number" class="form-control" id="giaKM" placeholder="Nh·∫≠p gi√° khuy·∫øn m√£i">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">S·ªë l∆∞·ª£ng</label>
                        <input type="number" class="form-control" id="soLuong" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">ƒê√°nh gi√° trung b√¨nh</label>
                        <input type="text" class="form-control" id="danhGia" value="T·ª± ƒë·ªông t√≠nh" disabled>
                    </div>

                    <div class="col-12">
                        <label class="form-label">·∫¢nh ch√≠nh</label>
                        <input type="file" class="form-control" id="anhChinh">
                    </div>

                    <div class="col-12">
                        <label class="form-label">·∫¢nh ph·ª• (nhi·ªÅu h√¨nh)</label>
                        <input type="file" class="form-control" id="anhPhu" multiple>
                    </div>

                    <div class="col-12">
                        <label class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
                        <textarea class="form-control" id="moTa" rows="3" placeholder="Gi·ªõi thi·ªáu, ∆∞u ƒëi·ªÉm, c√¥ng ngh·ªá..."></textarea>
                    </div>

                    <div class="col-12">
                        <label class="form-label">Th√¥ng s·ªë k·ªπ thu·∫≠t</label>
                        <textarea class="form-control" id="thongSo" rows="3" placeholder="Nh·∫≠p th√¥ng s·ªë k·ªπ thu·∫≠t..."></textarea>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                <button class="btn btn-primary">L∆∞u Thay ƒê·ªïi</button>
            </div>
        </div>
    </div>
</div>



<!-- === SCRIPT === -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>

    // Toggle submenu
    document.querySelectorAll('.has-submenu .menu-item').forEach(item => {
        item.addEventListener('click', () => {
            const parent = item.parentElement;
            parent.classList.toggle('open');
        });
    });

    // Datatable
    $(document).ready(function () {
        const table = $('#tableSanPham').DataTable({
            language: {
                lengthMenu: "Hi·ªÉn th·ªã _MENU_ s·∫£n ph·∫©m",
                info: "Hi·ªÉn th·ªã _START_ - _END_ / _TOTAL_ s·∫£n ph·∫©m",
                paginate: { previous: "Tr∆∞·ªõc", next: "Sau" }
            }
        });

        $('#searchInput').on('keyup', function () {
            table.search(this.value).draw();
        });
    });

    // N√∫t th√™m
    document.querySelector('.btn-success').addEventListener('click', () => {
        document.querySelector('#modalSanPham .modal-title').textContent = "üÜï Th√™m S·∫£n Ph·∫©m";
        document.getElementById('formSanPham').reset();
    });

    // N√∫t S·ª≠a ‚Üí Hi·ªán modal v√† ƒë·ªï d·ªØ li·ªáu
    document.querySelectorAll('.btn-warning').forEach(btn => {
        btn.addEventListener('click', () => {
            const row = btn.closest('tr');
            // Hi·ªÉn th·ªã modal
            const modal = new bootstrap.Modal(document.getElementById('modalSanPham'));
            modal.show();
        });
    });

    // ===== X√ìA S·∫¢N PH·∫®M =====
    document.querySelectorAll('.btn-danger').forEach(btn => {
        btn.addEventListener('click', () => {
            const row = btn.closest('tr');
            if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh√¥ng?")) {
                row.remove();
            }
        });
    });


    // ===== THAY ƒê·ªîI TR·∫†NG TH√ÅI S·∫¢N PH·∫®M =====
    document.querySelectorAll('.btn-secondary').forEach(btn => {
        btn.addEventListener('click', () => {
            const row = btn.closest('tr');
            const statusCell = row.cells[6]; // C·ªôt tr·∫°ng th√°i

            // N·∫øu tr·∫°ng th√°i ƒëang l√† "ƒêang KD" ‚Üí chuy·ªÉn sang "·∫®n"
            if (statusCell.innerText.trim() === "ƒêang KD" || statusCell.innerText.trim() === "ƒêang Kinh Doanh") {
                statusCell.innerHTML = `<span class="badge bg-secondary">·∫®n</span>`;
                btn.innerHTML = `<i class="bi bi-eye"></i>`; // icon m·ªü m·∫Øt
            }
            // Ng∆∞·ª£c l·∫°i: ƒëang ·∫®n ‚Üí chuy·ªÉn th√†nh ƒêang KD
            else {
                statusCell.innerHTML = `<span class="badge bg-success">ƒêang KD</span>`;
                btn.innerHTML = `<i class="bi bi-eye-slash"></i>`; // icon ƒë√≥ng m·∫Øt
            }
        });
    });


</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const logoutBtn = document.getElementById("logoutBtn");
        const logoutModal = document.getElementById("logoutModal");
        const cancelLogout = document.getElementById("cancelLogout");

        // M·ªü popup
        logoutBtn.addEventListener("click", function() {
            logoutModal.style.display = "flex";
        });

        // ƒê√≥ng popup
        cancelLogout.addEventListener("click", function() {
            logoutModal.style.display = "none";
        });
    });
</script>
</body>
</html>
